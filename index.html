<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>é¦¬å¹´ 16 å®®æ ¼æ·±åº¦æŒ‘æˆ°è³½</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* è¼‰å…¥ Noto Sans TC ä½œç‚ºå¾Œå‚™ */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');

        :root {
            --cny-red: #d62828;
            --cny-gold: #f9d423;
        }

        /* å…¨åŸŸå­—é«”ï¼šå¾®è»Ÿæ­£é»‘é«” */
        body {
            background-color: #1a1a1a;
            background-image: linear-gradient(rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0.75)), 
                              url('https://media.istockphoto.com/id/2222690159/zh/%E5%90%91%E9%87%8F/2026-year-of-the-horse-vector-new-years-greeting-card-template-with-a-prancing-horse-silhouette.jpg?s=612x612&w=0&k=20&c=SC_ro4OIkUOaT83ENW2SQsCwcimuDXeMOikrwxDRoIs=');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            font-family: "Microsoft JhengHei", "å¾®è»Ÿæ­£é»‘é«”", "Noto Sans TC", sans-serif;
            font-weight: 700;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: env(safe-area-inset-top) 16px env(safe-area-inset-bottom);
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* æ¨™é¡Œè¨­å®š */
        .cny-title {
            font-weight: 900;
            font-size: clamp(2rem, 10vw, 4rem);
            color: var(--cny-gold);
            text-shadow: 4px 4px 0px #000;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            letter-spacing: 2px;
            text-align: center;
        }

        .cny-subtitle {
            font-weight: 900;
            font-size: clamp(0.9rem, 5vw, 1.5rem);
            color: var(--cny-gold);
            margin-bottom: 2rem;
            opacity: 0.95;
            letter-spacing: 1px;
            text-align: center;
        }

        /* ç¶²æ ¼è¨­å®š */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: clamp(8px, 2.5vw, 15px);
            max-width: 500px;
            width: 100%;
            z-index: 10;
            touch-action: manipulation;
        }

        .punch-card {
            aspect-ratio: 1 / 1;
            background: linear-gradient(135deg, var(--cny-red), #b21e1e);
            border: 2px solid var(--cny-gold);
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s;
            box-shadow: 0 4px 0px #5e0000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(1.2rem, 6vw, 2.2rem);
            font-weight: 900;
            color: var(--cny-gold);
            will-change: transform;
        }

        .punch-card.poked {
            background: #2a0000;
            border-color: #4a0000;
            color: #555;
            box-shadow: inset 0 4px 8px rgba(0,0,0,0.6);
            transform: scale(0.95);
            cursor: default;
        }

        /* æ§åˆ¶æŒ‰éˆ• */
        .music-control {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(0,0,0,0.7);
            border: 2px solid var(--cny-gold);
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(4px);
        }

        .music-control.muted::after {
            content: '';
            position: absolute;
            width: 2px;
            height: 28px;
            background: #ff4d4d;
            transform: rotate(45deg);
        }

        .logo-link {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 50;
        }

        .logo-img {
            height: 44px;
            background: rgba(0, 0, 0, 0.7);
            padding: 8px;
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.4);
            backdrop-filter: blur(4px);
        }

        /* Modal æ¨£å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.92);
            z-index: 200;
            justify-content: center;
            align-items: center;
            padding: 16px;
            backdrop-filter: blur(8px);
        }

        .modal-content {
            background: #fff;
            color: #333;
            padding: clamp(20px, 6vw, 36px);
            border-radius: 28px;
            max-width: 480px;
            width: 100%;
            text-align: center;
            border: 8px solid var(--cny-gold);
            max-height: 90vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            position: relative;
        }

        .option-btn {
            display: block;
            width: 100%;
            padding: 16px;
            margin: 12px 0;
            background: #fffafa;
            border: 2px solid #fee2e2;
            border-radius: 14px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 900;
            transition: all 0.2s;
        }

        .option-btn:active {
            background: #fff3cd;
            border-color: var(--cny-gold);
            transform: scale(0.97);
        }

        /* è½‰ç›¤æ¨£å¼ */
        .wheel-container {
            position: relative;
            width: clamp(240px, 65vw, 300px);
            height: clamp(240px, 65vw, 300px);
            margin: 25px auto;
            border-radius: 50%;
            border: 10px solid var(--cny-red);
            box-shadow: 0 0 30px rgba(0,0,0,0.4);
            background: #333;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            transition: transform 4s cubic-bezier(0.1, 0, 0.1, 1);
            will-change: transform;
        }

        .wheel-reward {
            background: conic-gradient(
                #d62828 0deg 90deg, 
                #fcc419 90deg 180deg, 
                #b21e1e 180deg 270deg, 
                #eec100 270deg 360deg
            );
        }

        .wheel-punish {
            background: conic-gradient(
                #3498db 0deg 72deg, 
                #9b59b6 72deg 144deg, 
                #e67e22 144deg 216deg, 
                #2ecc71 216deg 288deg, 
                #f1c40f 288deg 360deg
            );
        }

        .wheel-label {
            position: absolute;
            width: 100%;
            height: 100%;
            text-align: center;
            font-weight: 900;
            font-size: 1rem;
            padding-top: 30px;
            pointer-events: none;
        }

        /* çå‹µæ¨™ç±¤è§’åº¦æ ¡æº– */
        .r-label-0 { transform: rotate(45deg); color: white; font-size: 1.5rem; }
        .r-label-1 { transform: rotate(135deg); color: #d62828; font-size: 1.5rem; }
        .r-label-2 { transform: rotate(225deg); color: white; font-size: 1.5rem; }
        .r-label-3 { transform: rotate(315deg); color: #d62828; font-size: 1.5rem; }

        /* è™•ç½°æ¨™ç±¤è§’åº¦æ ¡æº– */
        .p-label-0 { transform: rotate(36deg); color: white; }
        .p-label-1 { transform: rotate(108deg); color: white; }
        .p-label-2 { transform: rotate(180deg); color: white; }
        .p-label-3 { transform: rotate(252deg); color: white; }
        .p-label-4 { transform: rotate(324deg); color: white; }

        .wheel-pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 0; height: 0;
            border-left: 22px solid transparent;
            border-right: 22px solid transparent;
            border-top: 45px solid #333;
            z-index: 50;
            filter: drop-shadow(0 4px 4px rgba(0,0,0,0.5));
        }

        /* åº•éƒ¨è¨­è¨ˆè€…è³‡è¨Š - æ‰‹æ©Ÿé©æ‡‰ */
        .footer-info {
            margin-top: auto;
            padding: 40px 10px 20px;
            text-align: center;
            z-index: 10;
            width: 100%;
        }

        .footer-info a {
            color: rgba(255, 255, 255, 1);
            font-size: clamp(0.7rem, 4vw, 1.15rem); /* æ‰‹æ©Ÿè‡ªå‹•ç¸®å° */
            font-weight: 900;
            letter-spacing: 1px;
            white-space: nowrap; /* ç¢ºä¿ä¸æ›è¡Œ */
            display: inline-block;
            text-decoration: none;
            transition: opacity 0.2s;
        }

        .footer-info a:hover {
            opacity: 0.8;
            text-decoration: underline;
        }

        #youtube-player-container {
            position: fixed;
            width: 1px; height: 1px;
            left: -100px; opacity: 0;
        }

        .explanation-box {
            background-color: #fff9db;
            border-radius: 12px;
            padding: 15px;
            text-align: left;
            font-size: 0.95rem;
            line-height: 1.6;
            margin-top: 15px;
            border-left: 5px solid #fcc419;
            font-weight: 700;
        }
    </style>
</head>
<body>

    <div id="youtube-player-container"><div id="yt-player"></div></div>

    <div class="music-control" id="musicBtn" onclick="toggleMusic()">
        <svg viewBox="0 0 24 24" width="22" height="22" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round" style="color: var(--cny-gold);">
            <path d="M9 18V5l12-2v13"></path>
            <circle cx="6" cy="18" r="3"></circle>
            <circle cx="18" cy="16" r="3"></circle>
        </svg>
    </div>

    <h1 class="cny-title">é¦¬åˆ°æˆåŠŸæˆ³æˆ³æ¨‚</h1>
    <p class="cny-subtitle">ä¸€é¦¬ç•¶å…ˆï¼16 é“è¶£å‘³æŒ‘æˆ°ç­‰ä½ ä¾†ç ´ï¼</p>

    <div class="grid-container" id="gridContainer"></div>

    <div class="footer-info">
        <a href="https://www.facebook.com/profile.php?id=100063748491881" target="_blank">
            è¨­è¨ˆè€…ï¼šæ„›è¿ªæ¨‚ é¾å­Ÿä¿® è·èƒ½æ²»ç™‚å¸«
        </a>
    </div>

    <a href="https://adlers.tw/" target="_blank" class="logo-link">
        <img src="https://adlers.tw/wp-content/uploads/2021/05/ADL-LOGO_v2.png" alt="æ„›è¿ªæ¨‚ Logo" class="logo-img">
    </a>

    <div class="modal" id="gameModal">
        <div class="modal-content" id="modalContent">
            <div id="questionView">
                <div class="flex justify-center mb-3">
                    <span class="bg-red-50 text-red-600 px-4 py-1 rounded-full text-xs font-black tracking-widest" id="questionCategory">é¦¬å¹´ç‰¹é¸</span>
                </div>
                <h2 id="questionText" class="text-2xl font-black mb-8 leading-tight text-gray-800">è¼‰å…¥ä¸­...</h2>
                <div id="optionsGroup"></div>
            </div>

            <div id="resultView" class="hidden">
                <div id="feedbackIcon" class="text-7xl mb-4">ğŸ</div>
                <h3 id="feedbackTitle" class="text-3xl font-black mb-4"></h3>
                
                <div id="interactiveSection" class="mb-6">
                    <p id="interactivePrompt" class="text-sm font-bold text-gray-500 mb-2"></p>
                    <div class="wheel-container">
                        <div class="wheel-pointer"></div>
                        <div id="wheel" class="wheel"></div>
                    </div>
                    <button id="spinBtn" onclick="handleSpin()" class="w-full bg-yellow-500 text-white py-4 rounded-2xl font-black text-xl shadow-lg active:scale-95 transition-all">
                        è½‰å‹•å¹¸é‹è½‰ç›¤ï¼
                    </button>
                    <div id="interactiveResult" class="hidden mt-6 p-5 rounded-2xl border-2">
                        <p id="resultTextMain" class="font-black text-2xl"></p>
                        <p id="resultTextSub" class="text-md mt-2 font-bold"></p>
                    </div>
                </div>

                <div class="mb-5 p-4 bg-green-50 rounded-2xl border border-green-100">
                    <p class="text-[10px] text-green-600 font-black uppercase mb-1">æ­£ç¢ºç­”æ¡ˆ</p>
                    <p id="correctAnswerText" class="text-xl font-black text-green-700"></p>
                </div>

                <div class="explanation-box">
                    <p class="font-black text-gray-800 text-md mb-2">ğŸ’¡ å…¸æ•…è§£æ</p>
                    <p id="explanationText" class="text-gray-700 leading-relaxed font-bold"></p>
                </div>

                <button onclick="closeModal()" class="mt-8 w-full bg-red-600 text-white px-6 py-5 rounded-2xl font-black text-xl shadow-[0_5px_0_#9d0208] active:translate-y-1 active:shadow-none transition-all">
                    ä¸‹ä¸€å€‹æŒ‘æˆ°ï¼
                </button>
            </div>
        </div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
        const questions = [
            { q: "æˆèªã€Œé¾é¦¬ç²¾ç¥ã€ä¸­çš„ã€Œé¾é¦¬ã€ï¼Œåœ¨å¤ä»£å‚³èªªä¸­æ˜¯æŒ‡ä»€éº¼æ¨£çš„é¦¬ï¼Ÿ", a: ["é•·äº†ç¿…è†€çš„é¦¬", "é¦¬é ­é¾èº«çš„é§¿é¦¬", "è·‘å¾—æœ€å¿«çš„é¦¬"], correct: 1, exp: "é¾é¦¬æ˜¯å¤ä»£å‚³èªªä¸­ä¸€ç¨®åƒé¾åˆåƒé¦¬çš„ç¥ç¸ï¼Œè±¡å¾µå¥æ—ºéå‡¡çš„ç²¾ç¥ç‹€æ…‹ã€‚" },
            { q: "æ­·å²ä¸Šè‘—åçš„ã€Œèµ¤å…”é¦¬ã€æ›¾æ˜¯å“ªä½å‚³å¥‡æ­¦å°‡çš„åé¨ï¼Ÿ", a: ["å¼µé£›", "é—œç¾½", "è¶™é›²"], correct: 1, exp: "èµ¤å…”é¦¬ã€Œæ—¥è¡Œåƒé‡Œï¼Œæ¸¡æ°´ç™»å±±ã€ï¼Œå…ˆå¾Œç‚ºå‘‚å¸ƒèˆ‡é—œç¾½æ•ˆåŠ›ï¼Œæ˜¯åé¦¬çš„ä»£åè©ã€‚" },
            { q: "æˆèªã€Œé¦¬åˆ°æˆåŠŸã€æœ€åˆæ˜¯å½¢å®¹ä»€éº¼æ¨£çš„å ´æ™¯ï¼Ÿ", a: ["æ‰“ä»—å¤§ç²å…¨å‹", "è€ƒè©¦è€ƒç¬¬ä¸€å", "åšç”Ÿæ„ç™¼è²¡"], correct: 0, exp: "èµ·æºæ–¼æˆ°å ´ï¼Œå½¢å®¹æˆ°é¦¬ä¸€åˆ°å‰ç·šä¾¿å–å¾—å‹åˆ©ï¼Œç¾åœ¨å¤šç”¨æ–¼ç¥è³€äº‹æƒ…é †åˆ©é”æˆã€‚" },
            { q: "åœ¨åäºŒç”Ÿè‚–ä¸­ï¼Œé¦¬çš„æ’åˆ—é †åºæ˜¯ç¬¬å¹¾ä½ï¼Ÿ", a: ["ç¬¬äº”ä½", "ç¬¬ä¸ƒä½", "ç¬¬ä¹ä½"], correct: 1, exp: "ç”Ÿè‚–é †åºç‚ºï¼šé¼ ç‰›è™å…”é¾è›‡é¦¬ç¾ŠçŒ´é›ç‹—è±¬ã€‚é¦¬æ’åœ¨ç¬¬ä¸ƒä½ã€‚" },
            { q: "å‚³èªªä¸­èƒ½æ—¥è¡Œåƒé‡Œçš„åé¦¬ï¼Œå¿…é ˆè¦æœ‰èª°çš„è³è­˜æ‰èƒ½è¢«ç™¼ç¾ï¼Ÿ", a: ["ä¼¯æ¨‚", "é½Šå®£ç‹", "ç§¦å§‹çš‡"], correct: 0, exp: "ã€Œä¸–æœ‰ä¼¯æ¨‚ï¼Œç„¶å¾Œæœ‰åƒé‡Œé¦¬ã€ã€‚ä¼¯æ¨‚ä»¥å–„æ–¼ç›¸é¦¬è‘—ç¨±ï¼Œæ¯”å–»èƒ½è­˜åˆ¥äººæçš„äººã€‚" },
            { q: "ã€Šè¥¿éŠè¨˜ã€‹ä¸­ï¼Œå”ä¸‰è—é¨çš„ã€Œç™½é¾é¦¬ã€åŸæœ¬æ˜¯ä»€éº¼èº«ä»½ï¼Ÿ", a: ["ä¸€åŒ¹æ™®é€šçš„é‡é¦¬", "è¥¿æµ·é¾ç‹ä¸‰å¤ªå­", "å¤©ä¸Šçš„å¤©é¦¬"], correct: 1, exp: "ç™½é¾é¦¬æœ¬æ˜¯è¥¿æµ·é¾ç‹ä¹‹å­å‚²çƒˆï¼Œå› çŠ¯éŒ¯è¢«è²¶ï¼Œå¾ŒåŒ–ç‚ºç™½é¦¬è­·é€å”åƒ§å–ç¶“ã€‚" },
            { q: "éå¹´æ™‚ã€Œå€’è²¼ç¦å­—ã€çš„ç”±ä¾†ï¼Œç›¸å‚³èˆ‡å“ªä½é¦¬çš‡åçš„æ©Ÿæ™ºæœ‰é—œï¼Ÿ", a: ["é•·å­«çš‡å", "é¦¬çš‡å", "æ­¦å‰‡å¤©"], correct: 1, exp: "æ˜æœé¦¬çš‡åç‚ºæ•‘ä¸€å®¶èª¤å°‡ç¦å­—è²¼å€’çš„ç™¾å§“ï¼Œç¬‘ç¨±æ˜¯ã€Œç¦åˆ°äº†ã€ï¼Œå¾æ­¤æˆç‚ºç¿’ä¿—ã€‚" },
            { q: "å¤§å¹´åˆä¸€çš„ç¬¬ä¸€é¤ï¼Œè¨±å¤šå®¶åº­ç¿’æ…£åƒã€Œé¤ƒå­ã€ï¼Œæ˜¯ç‚ºäº†æ±‚ä»€éº¼ï¼Ÿ", a: ["æ‹›è²¡é€²å¯¶", "é•·å‘½ç™¾æ­²", "æ­¥æ­¥é«˜å‡"], correct: 0, exp: "é¤ƒå­å½¢ç‹€åƒé‡‘å…ƒå¯¶ï¼Œéå¹´åƒé¤ƒå­æœ‰è²¡æºå»£é€²çš„å‰ç¥¥å¯“æ„ã€‚" },
            { q: "éå¹´å‚³çµ±ç¾é£Ÿã€Œå¹´ç³•ã€ï¼Œå…¶è«§éŸ³å¯“æ„è‘—ä»€éº¼ï¼Ÿ", a: ["å¹´å¹´æœ‰é¤˜", "å¹´å¹´é«˜å‡", "åˆå®¶åœ˜åœ“"], correct: 1, exp: "ã€Œå¹´ç³•ã€èˆ‡ã€Œå¹´é«˜ã€è«§éŸ³ï¼Œå¯“æ„å°å­©èº«é«˜é•·å¾—é«˜ï¼Œå¤§äººäº‹æ¥­æ­¥æ­¥é«˜å‡ã€‚" },
            { q: "ã€Œå£“æ­²éŒ¢ã€ä¸­çš„ã€Œæ­²ã€ï¼Œåœ¨å¤ä»£å‚³èªªä¸­å…¶å¯¦æ˜¯æŒ‡ä»€éº¼ï¼Ÿ", a: ["æ™‚é–“", "å¦–ç¸ã€Œç¥Ÿã€", "æ­²éŒ¢"], correct: 1, exp: "å‚³èªªã€Œç¥Ÿã€æ˜¯é™¤å¤•å‡ºç¾çš„å¦–æ€ªï¼Œçˆ¶æ¯ç”¨éŒ¢æ”¾åœ¨æ•é ­ä¸‹å£“ä½ï¼Œç¨±ç‚ºã€Œå£“ç¥Ÿã€ï¼Œå¾Œæ¼”è®Šç‚ºå£“æ­²éŒ¢ã€‚" },
            { q: "æ˜¥è¯çš„ç¥–å…ˆè¢«ç¨±ç‚ºã€Œæ¡ƒç¬¦ã€ï¼Œæœ€åˆæ˜¯ç”¨ä¾†å¹¹å˜›çš„ï¼Ÿ", a: ["å¯«é¡˜æœ›", "è£é£¾é–€æ¡†", "é©…é‚ªé¿é¬¼"], correct: 2, exp: "å¤äººå°‡ç¥åƒåˆ»åœ¨æ¡ƒæœ¨æ¿ä¸Šæ›é–€å£ï¼Œç”¨ä¾†éœ‡æ‡¾é¬¼ç¥ï¼Œé€™å°±æ˜¯æ˜¥è¯æœ€æ—©çš„å½¢å¼ã€‚" },
            { q: "é™¤å¤•å¤œå…¨å®¶äººèšåœ¨ä¸€èµ·åƒçš„é€™é “é£¯ï¼Œæ­£å¼åç¨±æ˜¯ä»€éº¼ï¼Ÿ", a: ["åœ˜åœ“é£¯", "å¹³å®‰é£¯", "å¹´å¤œé£¯"], correct: 2, exp: "å¹´å¤œé£¯åˆç¨±åœçˆï¼Œæ˜¯éå¹´æœŸé–“æœ€é‡è¦çš„å„€å¼ï¼Œè±¡å¾µå…¨å®¶åœ˜èšã€è¾­èˆŠè¿æ–°ã€‚" },
            { q: "å‚³èªªã€Œå¹´ç¸ã€æœ€å®³æ€•çš„ã€Œä¸‰ä»¶å¯¶ã€æ˜¯ä»€éº¼ï¼Ÿ", a: ["å¤§è²å…¬ã€ç«æŠŠã€æ£å­", "ç´…ç´™ã€ç«å…‰ã€éŸ¿è²", "é£Ÿç‰©ã€ç¾é…’ã€éŸ³æ¨‚"], correct: 1, exp: "å¹´ç¸æ€•ç´…ã€æ€•ç«ã€æ€•éŸ¿ã€‚æ‰€ä»¥éå¹´è¦è²¼ç´…æ˜¥è¯ã€ç‡ƒç¯ç«ã€æ”¾é­ç‚®ã€‚" },
            { q: "å¤§å¹´åˆäº”åˆç¨±ç‚ºã€Œç ´äº”ã€ï¼Œæœ€é‡è¦çš„æ°‘ä¿—æ´»å‹•æ˜¯ï¼Ÿ", a: ["å›å¨˜å®¶", "è¿è²¡ç¥", "è³èŠ±ç‡ˆ"], correct: 1, exp: "åˆäº”æ˜¯è²¡ç¥çš„ç”Ÿæ—¥ï¼Œä¹Ÿæ˜¯å•†åº—é–‹å¼µçš„æ—¥å­ï¼Œé€™å¤©è¦è¿è²¡ç¥ï¼Œä¿ä½‘ä¸€å¹´è²¡é‹äº¨é€šã€‚" },
            { q: "ã€Œå…ƒå®µç¯€ã€é€šå¸¸æ˜¯åœ¨è¾²æ›†æ­£æœˆçš„å“ªä¸€å¤©ï¼Ÿ", a: ["åˆä¸€", "åˆäº”", "åäº”"], correct: 2, exp: "æ­£æœˆåäº”æ˜¯æ–°å¹´çš„ç¬¬ä¸€å€‹æ»¿æœˆä¹‹å¤œï¼Œç¨±ç‚ºå…ƒå®µç¯€ï¼Œæ¨™èªŒè‘—æ˜¥ç¯€æ´»å‹•çš„åœ“æ»¿çµæŸã€‚" },
            { q: "å¤äººåœ¨éå¹´æ™‚æœƒå–ã€Œå± è˜‡é…’ã€ï¼Œå…¶é£²ç”¨é †åºæœ‰ä½•ç‰¹è‰²ï¼Ÿ", a: ["é•·è€…å…ˆå–", "ç”±å¹¼åŠé•·", "å…¨å®¶ä¸€èµ·ä¹¾æ¯"], correct: 1, exp: "å¤äººèªç‚ºå¹´å°‘è€…å¢æ­²å€¼å¾—æ…¶ç¥ï¼Œé•·è€…å¤±æ­²ä»¤äººæ„Ÿå‚·ï¼Œæ•…è®“å¹´å°‘è€…å…ˆå–ï¼Œé•·è€…æœ€å¾Œå–ã€‚" }
        ];

        // è½‰ç›¤å…§å®¹ä¿®æ­£ï¼šé‡‘é¡èˆ‡æ–‡å­—å®Œå…¨å°é½Š
        const rewards = ["200", "600", "800", "1000"];
        const punishs = ["é¦¬å¹´ç¥è³€è©", "é¦¬ç›¸é—œæˆèª", "æ„Ÿè¬çš„äººäº‹ç‰©", "æ–°å¹´æ–°å¸Œæœ›", "å»å¹´é‡è¦çš„æˆé•·"];
        const praiseWords = ["é¦¬åˆ°æˆåŠŸï¼", "é¾é¦¬ç²¾ç¥ï¼", "è¬é¦¬å¥”é¨°ï¼", "ä¸€é¦¬ç•¶å…ˆï¼", "æ‰è¯æ©«æº¢ï¼"];

        const pokedIndices = new Set();
        let currentIdx = -1;
        let audioCtx;
        let ytPlayer;
        let isMuted = false;
        let isSpinning = false;
        let lastResultIsCorrect = false;

        function onYouTubeIframeAPIReady() {
            ytPlayer = new YT.Player('yt-player', {
                height: '0', width: '0', videoId: '3uCq6rBxHhw',
                playerVars: { 'autoplay': 1, 'loop': 1, 'playlist': '3uCq6rBxHhw', 'controls': 0, 'showinfo': 0, 'mute': 0 },
                events: { 'onReady': (e) => e.target.playVideo() }
            });
        }

        function toggleMusic() {
            isMuted = !isMuted;
            const btn = document.getElementById('musicBtn');
            if (isMuted) { ytPlayer.pauseVideo(); btn.classList.add('muted'); }
            else { ytPlayer.playVideo(); btn.classList.remove('muted'); }
        }

        function playSfx(type) {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const now = audioCtx.currentTime;
            const gain = audioCtx.createGain();
            gain.connect(audioCtx.destination);

            if (type === 'pop') {
                const osc = audioCtx.createOscillator();
                osc.type = 'sine'; osc.frequency.setValueAtTime(450, now);
                osc.frequency.exponentialRampToValueAtTime(40, now + 0.1);
                gain.gain.setValueAtTime(0.4, now); gain.gain.linearRampToValueAtTime(0, now + 0.1);
                osc.connect(gain); osc.start(); osc.stop(now + 0.1);
            } else if (type === 'tick') {
                const osc = audioCtx.createOscillator();
                osc.type = 'square'; osc.frequency.setValueAtTime(800, now);
                gain.gain.setValueAtTime(0.06, now); gain.gain.linearRampToValueAtTime(0, now + 0.02);
                osc.connect(gain); osc.start(); osc.stop(now + 0.02);
            } else if (type === 'success') {
                [523.25, 659.25, 783.99, 1046.50].forEach((freq, i) => {
                    const osc = audioCtx.createOscillator();
                    osc.type = 'triangle'; osc.frequency.setValueAtTime(freq, now + i * 0.12);
                    gain.gain.setValueAtTime(0.12, now + i * 0.12);
                    gain.gain.linearRampToValueAtTime(0, now + i * 0.12 + 0.4);
                    osc.connect(gain); osc.start(now + i * 0.12); osc.stop(now + i * 0.12 + 0.4);
                });
            } else if (type === 'fail') {
                const osc = audioCtx.createOscillator();
                osc.type = 'sawtooth'; osc.frequency.setValueAtTime(220, now);
                osc.frequency.linearRampToValueAtTime(80, now + 0.45);
                gain.gain.setValueAtTime(0.12, now); gain.gain.linearRampToValueAtTime(0, now + 0.45);
                osc.connect(gain); osc.start(); osc.stop(now + 0.45);
            }
        }

        function initGrid() {
            const container = document.getElementById('gridContainer');
            for (let i = 0; i < 16; i++) {
                const card = document.createElement('div');
                card.className = 'punch-card'; card.innerHTML = `<span>${i + 1}</span>`;
                card.onclick = () => handlePoke(i, card);
                container.appendChild(card);
            }
        }

        function handlePoke(index, element) {
            if (pokedIndices.has(index)) return;
            playSfx('pop');
            if (ytPlayer && !isMuted) ytPlayer.playVideo();
            currentIdx = index; pokedIndices.add(index);
            element.classList.add('poked'); showQuestion(index);
        }

        function showQuestion(index) {
            const data = questions[index];
            document.getElementById('questionCategory').innerText = (index < 7) ? "é¦¬å¹´ç‰¹é¸" : "å‚³çµ±æ°‘ä¿—";
            document.getElementById('questionText').innerText = data.q;
            const optionsGroup = document.getElementById('optionsGroup');
            optionsGroup.innerHTML = '';
            data.a.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn'; btn.innerText = opt;
                btn.onclick = () => checkAnswer(i);
                optionsGroup.appendChild(btn);
            });
            document.getElementById('questionView').classList.remove('hidden');
            document.getElementById('resultView').classList.add('hidden');
            document.getElementById('gameModal').style.display = 'flex';
        }

        function checkAnswer(selected) {
            const data = questions[currentIdx];
            lastResultIsCorrect = (selected === data.correct);
            document.getElementById('questionView').classList.add('hidden');
            const resView = document.getElementById('resultView'); resView.classList.remove('hidden');
            
            const title = document.getElementById('feedbackTitle');
            const icon = document.getElementById('feedbackIcon');
            const prompt = document.getElementById('interactivePrompt');
            const wheel = document.getElementById('wheel');
            const spinBtn = document.getElementById('spinBtn');
            const iResult = document.getElementById('interactiveResult');

            document.getElementById('correctAnswerText').innerText = data.a[data.correct];
            document.getElementById('explanationText').innerText = data.exp;
            
            iResult.classList.add('hidden');
            spinBtn.classList.remove('hidden');
            wheel.style.transform = `rotate(0deg)`;
            wheel.innerHTML = '';

            if (lastResultIsCorrect) {
                playSfx('success'); icon.innerText = 'ğŸ”¥';
                title.innerText = praiseWords[Math.floor(Math.random() * praiseWords.length)];
                title.className = "text-3xl font-black mb-3 text-red-600 animate-bounce";
                prompt.innerText = "ç­”å°äº†ï¼æŠ½åŠ ç¢¼ç´…åŒ…å›‰ï¼";
                wheel.className = "wheel wheel-reward";
                rewards.forEach((val, i) => {
                    wheel.innerHTML += `<div class="wheel-label r-label-${i}">${val}</div>`;
                });
                createConfetti();
            } else {
                playSfx('fail'); icon.innerText = 'ğŸ¤”';
                title.innerText = "çœŸå¯æƒœï¼å·®ä¸€é»é»ï¼";
                title.className = "text-3xl font-black mb-3 text-gray-700";
                prompt.innerText = "å¤§å†’éšªè™•ç½°æ™‚é–“ï¼æŠ½ä»»å‹™å§ï¼š";
                wheel.className = "wheel wheel-punish";
                punishs.forEach((val, i) => {
                    wheel.innerHTML += `<div class="wheel-label p-label-${i}">${val}</div>`;
                });
            }
        }

        function handleSpin() {
            if (isSpinning) return;
            isSpinning = true;
            const wheel = document.getElementById('wheel');
            const spinBtn = document.getElementById('spinBtn');
            const resultBox = document.getElementById('interactiveResult');
            const resMain = document.getElementById('resultTextMain');
            const resSub = document.getElementById('resultTextSub');
            
            spinBtn.innerText = "å¥½é‹è½‰å‹•ä¸­...";

            let targetIdx, totalDeg;
            if (lastResultIsCorrect) {
                targetIdx = Math.floor(Math.random() * 4);
                // æ­£ç¢ºæ˜ å°„ï¼š200(-45), 600(-135), 800(-225), 1000(-315)
                const offsets = [-45, -135, -225, -315];
                totalDeg = (360 * 8) + (offsets[targetIdx]);
            } else {
                targetIdx = Math.floor(Math.random() * 5);
                // æ­£ç¢ºæ˜ å°„ï¼šé¦¬å¹´ç¥è³€è©(-36), é¦¬ç›¸é—œæˆèª(-108), æ„Ÿè¬çš„äººäº‹ç‰©(-180), æ–°å¹´æ–°å¸Œæœ›(-252), å»å¹´é‡è¦çš„æˆé•·(-324)
                const offsets = [-36, -108, -180, -252, -324];
                totalDeg = (360 * 8) + (offsets[targetIdx]);
            }
            
            wheel.style.transform = `rotate(${totalDeg}deg)`;

            let lastTickAngle = 0;
            const tickInterval = setInterval(() => {
                const matrix = new WebKitCSSMatrix(window.getComputedStyle(wheel).transform);
                const perDegree = lastResultIsCorrect ? 90 : 72;
                const currentTotalAngle = Math.atan2(matrix.m12, matrix.m11) * (180 / Math.PI);
                const angle = (currentTotalAngle + 360) % perDegree;
                if (angle < lastTickAngle) playSfx('tick');
                lastTickAngle = angle;
            }, 55);

            setTimeout(() => {
                clearInterval(tickInterval);
                isSpinning = false;
                spinBtn.classList.add('hidden');
                resultBox.classList.remove('hidden');
                
                if (lastResultIsCorrect) {
                    resMain.innerText = `ğŸ‰ æŠ½ä¸­ç´…åŒ…ï¼š$${rewards[targetIdx]}ï¼`;
                    resMain.className = "font-black text-2xl text-yellow-800";
                    resSub.innerText = "è«‹ç¾å ´è¦ªå‹å¤§æ–¹çµ¦äºˆçå‹µå§ï¼";
                    resultBox.className = "mt-6 p-5 bg-yellow-50 border-2 border-yellow-500 rounded-2xl";
                    playSfx('success');
                    createConfetti();
                } else {
                    resMain.innerText = `ğŸ“¢ ä»»å‹™ï¼šèªªå‡ºä¸‰å€‹${punishs[targetIdx]}ï¼`;
                    resMain.className = "font-black text-xl text-blue-800";
                    resSub.innerText = "å®Œæˆæ­¤å¤§å†’éšªï¼Œé€™é—œæ‰ç®—éå”·ï¼";
                    resultBox.className = "mt-6 p-5 bg-blue-50 border-2 border-blue-500 rounded-2xl";
                    playSfx('fail');
                }
            }, 4200);
        }

        function closeModal() { document.getElementById('gameModal').style.display = 'none'; }

        function createConfetti() {
            const count = 55;
            const colors = ['#f9d423', '#d62828', '#ffffff', '#ff8e3c', '#00ffcc'];
            for (let i = 0; i < count; i++) {
                const conf = document.createElement('div');
                conf.className = 'confetti';
                conf.style.left = Math.random() * 100 + 'vw';
                conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                conf.style.top = '-20px'; 
                document.body.appendChild(conf);
                conf.animate([
                    { transform: `translate3d(0, 0, 0) rotate(0deg)`, opacity: 1 },
                    { transform: `translate3d(${(Math.random() - 0.5) * 400}px, 100vh, 0) rotate(${Math.random() * 1000}deg)`, opacity: 0 }
                ], { 
                    duration: 1800 + Math.random() * 1800, 
                    easing: 'cubic-bezier(0, .85, .45, 1)' 
                }).onfinish = () => conf.remove();
            }
        }

        window.onload = initGrid;
    </script>
</body>
</html>
